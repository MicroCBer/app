import{_ as m}from"../../../preload-helper-75e41364.js";import{b as g,j as s,d as f}from"../../../index-c550fbfb.js";import{a as n}from"../../../messenger-provider-aedd2154.js";import{P as h}from"../../../Popover-625761fc.js";const x=g(()=>s.jsx(h,{placement:"top",content:s.jsxs(s.Fragment,{children:["Execute(",s.jsx("code",{children:"Ctrl"})," + ",s.jsx("code",{children:"E"}),")"]}),offset:[0,6],children:s.jsx("button",{className:"excute",onClick:()=>n.send("run"),children:s.jsx("div",{className:"cldr codicon codicon-play"})})}));let l;const v="outputs",j=f(v,()=>({editor:{preload(r){const i=n.on("compile",()=>{if(!l){n.send("compile-completed",{"":{originalText:"",outputFiles:[{name:"(compile error)",text:"No output to compile, maybe the Editor is still loading",writeByteOrderMark:!1}]}});return}n.send("compile-completed",l)}),a=[r.languages.registerCompletionItemProvider(["typescript","javascript"],{triggerCharacters:["@"],async provideCompletionItems(e,t){if(t.lineNumber!==1)return;if(e.getLineContent(t.lineNumber).startsWith("// @"))return{suggestions:[{label:"devtools.output.compiled",detail:"Display the compiled output in the console's `.JS` tab",kind:r.languages.CompletionItemKind.Text,insertText:"devtools.output.compiled",range:new r.Range(t.lineNumber,t.column,t.lineNumber,t.column)}]}}})];return()=>{l=void 0,i(),a.forEach(e=>e.dispose())}},load(r,i){r.onDidChangeModelContent(function a(){const e=r.getModel();if(e){let t=Promise.resolve(void 0),u=!1;e.uri.path.match(/\.tsx?$/)&&(t=i.languages.typescript.getTypeScriptWorker()),e.uri.path.match(/\.jsx?$/)&&(u=!0,t=i.languages.typescript.getJavaScriptWorker()),t.then(o=>o==null?void 0:o(e.uri)).then(o=>o==null?void 0:o.getEmitOutput(e.uri.toString())).then(o=>{if(!o)return;const d=e.getValue(),p=e.uri.toString();l={[p]:{originalText:d,outputFiles:o.outputFiles}};const c=l[p];u&&(c.outputFiles=[{name:e.uri.toString(),writeByteOrderMark:!1,text:d}].concat(c.outputFiles)),n.send("compile-completed",l)})}return a}()),r.addCommand(i.KeyMod.CtrlCmd|i.KeyCode.KeyE,()=>n.send("run"))},topbar:[x]},devtools:({importInEvalLogs:r})=>r(new URL(Object.values(Object.assign({"./devtools.ts":()=>m(()=>import("../../../devtools-cfc77d6b.js"),["assets/devtools-cfc77d6b.js","assets/index-c550fbfb.js","assets/messenger-provider-aedd2154.js","assets/messenger-provider-4721cade.css","assets/preload-helper-75e41364.js","assets/Popover-625761fc.js"])}))[0].toString().replace(/.*import\("(.+?)"\).*/,"$1"),import.meta.url).href).then(i=>i.default)}));export{j as _,v as i};
